@model CORE.JGC.Models.MsSupplier[]
@{
    ViewBag.Title = "Suppliers";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript">

    function InputSupplier() {
        var SupplierCodeId = document.getElementById("SupplierCodeId").value;
        var SupplierNameId = document.getElementById("SupplierNameId").value;
        var PIC = document.getElementById("PIC").value;
        var AddressId = document.getElementById("AddressId").value;
        var CityId = document.getElementById("CityId").value;
        var ProvinceId = document.getElementById("ProvinceId").value;
        var PostalCodeId = document.getElementById("PostalCodeId").value;
        var TelephoneId = document.getElementById("TelephoneId").value;
        var FaxId = document.getElementById("FaxId").value;
        var Aktif = document.getElementById("ActiveId").value;

        if (document.getElementById("ActiveId").checked) {
            var Aktif = "1";
        }
        else {
            var Aktif = "0";
        }

        if (SupplierCodeId == "") {
            $(".modal-body #peringatan3").text("Supplier Code must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (SupplierNameId == "") {
            $(".modal-body #peringatan3").text("Supplier Name must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (PIC == "") {
            $(".modal-body #peringatan3").text("PIC must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (AddressId == "") {
            $(".modal-body #peringatan3").text("Address must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (CityId == "") {
            $(".modal-body #peringatan3").text("City must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (ProvinceId == "") {
            $(".modal-body #peringatan3").text("Province must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (PostalCodeId == "") {
            $(".modal-body #peringatan3").text("Postal Code must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (TelephoneId == "") {
            $(".modal-body #peringatan3").text("Telephone must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (FaxId == "") {
            $(".modal-body #peringatan3").text("Fax must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        }
        else {
            $.ajax({
                url: '@Url.Action("InsertSupplier", "Setup")',
                type: 'post',
                cache: false,
                async: true,
                data: {
                    SupplierCode: SupplierCodeId,
                    SupplierName: SupplierNameId,
                    PIC: PIC,
                    Address: AddressId,
                    City: CityId,
                    Province: ProvinceId,
                    PostalCode: PostalCodeId,
                    Telephone: TelephoneId,
                    Fax: FaxId,
                    Aktif : Aktif
                },
                success: function (response) {
                    if (response.success == true) {
                        $(".modal-body #peringatan2").text(response.responseText);
                        $('#btnok').click(function (e) {
                            window.location.href = "@Url.Action("Suppliers", "Setup")";
                        })
                        $("#Alert2").modal();
                    } else {
                        $(".modal-body #peringatan3").text(response.responseText);
                        $('#btnerror').click(function (e) {
                            $('#Alert3').modal('hide');
                        })
                        $("#Alert3").modal();
                    }
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    $(".modal-body #peringatan1").text("Please Wait...");
                    $('#btncaution').click(function (e) {
                        $('#Alert1').modal('hide');
                    })
                    $("#Alert1").modal();
                }
            });
        }
    }

    function InputEditSupplier() {
        var EditSupplierCodeId = document.getElementById("EditSupplierCodeId").value;
        var EditSupplierNameId = document.getElementById("EditSupplierNameId").value;
        var EditPIC = document.getElementById("EditPIC").value;
        var EditCityId = document.getElementById("EditCityId").value;
        var EditAddressId = document.getElementById("EditAddressId").value;
        var EditProvinceId = document.getElementById("EditProvinceId").value;
        var EditPostalCodeId = document.getElementById("EditPostalCodeId").value;
        var EditTelephoneId = document.getElementById("EditTelephoneId").value;
        var EditFaxId = document.getElementById("EditFaxId").value;
        var EditAktif = document.getElementById("EditActiveId").value;

        if (document.getElementById("EditActiveId").checked) {
            var EditAktif = "1";
        }
        else {
            var EditAktif = "0";
        }


        if (EditSupplierCodeId == "") {
            $(".modal-body #peringatan3").text("Supplier Code must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (EditSupplierNameId == "") {
            $(".modal-body #peringatan3").text("Supplier Name must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (EditPIC == "") {
            $(".modal-body #peringatan3").text("PIC must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (EditAddressId == "") {
            $(".modal-body #peringatan3").text("Address must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (EditProvinceId == "") {
            $(".modal-body #peringatan3").text("Province must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (EditCityId == "") {
            $(".modal-body #peringatan3").text("City must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (EditPostalCodeId == "") {
            $(".modal-body #peringatan3").text("Postal Code must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (EditTelephoneId == "") {
            $(".modal-body #peringatan3").text("Telephone must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        } else if (EditFaxId == "") {
            $(".modal-body #peringatan3").text("Fax must be filled");
            $('#btnerror').click(function (e) {
                $('#Alert3').modal('hide');
            })
            $("#Alert3").modal();
        }
        else {
            $(".modal-body #peringatan4").text("Are You Sure Update Data: " + EditSupplierCodeId + ' ( ' + EditSupplierNameId + " ) ? ");
            $('#btnyes').click(function (e) {
                $('#Alert4').modal('hide');

                $.ajax({
                    url: '@Url.Action("UpdateSupplier", "Setup")',
                    type: 'post',
                    cache: false,
                    async: true,
                    data: {
                        EditSupplierCode: EditSupplierCodeId,
                        EditSupplierName: EditSupplierNameId,
                        EditPIC: EditPIC,
                        EditAddress: EditAddressId,
                        EditCity: EditCityId,
                        EditProvince: EditProvinceId,
                        EditPostalCode: EditPostalCodeId,
                        EditTelephone: EditTelephoneId,
                        EditFax: EditFaxId,
                        EditAktif: EditAktif
                    },
                    success: function (response) {
                        if (response.success == true) {
                            $(".modal-body #peringatan2").text(response.responseText);
                            $('#btnok').click(function (e) {
                                window.location.href = "@Url.Action("Suppliers", "Setup")";
                            })
                            $("#Alert2").modal();
                        } else {
                            $(".modal-body #peringatan3").text(response.responseText);
                            $('#btnerror').click(function (e) {
                                $('#Alert3').modal('hide');
                            })
                            $("#Alert3").modal();
                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        $(".modal-body #peringatan1").text("Please Wait...");
                        $('#btncaution').click(function (e) {
                            $('#Alert1').modal('hide');
                        })
                        $("#Alert1").modal();
                    }
                });
            });
            $('#btnno').click(function (e) {
                $('#Alert4').modal('hide');
            });
            $("#Alert4").modal();
        }
    }

    function UpdateSupplierS(NoID, SupplierCode, SupplierName, PIC, Address, City, Province, PostalCode, Telephone, Fax, Aktif) {
        if (Aktif == "Y") {
            $(".icheckbox_flat-green").addClass('checked');
        }

        $(".modal-body #EditSupplierCodeId").val(SupplierCode);
        $(".modal-body #EditSupplierNameId").val(SupplierName);

        $(".modal-body #EditPIC").val(PIC);
        $(".modal-body #EditAddressId").val(Address);
        $(".modal-body #EditCityId").val(City);
        $(".modal-body #EditProvinceId").val(Province);
        $(".modal-body #EditPostalCodeId").val(PostalCode);

        $(".modal-body #EditTelephoneId").val(Telephone);
        $(".modal-body #EditFaxId").val(Fax);

        $(".modal-body #NoID").val(NoID);

        $("#editModal").modal();

    }


</script>

<div class="right_col" role="main">
    <div class="">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="menusect">
                        <h5>
                            Setup •
                            <a href="/setup/suppliers" class="activemenu">Suppliers</a>
                        </h5>
                    </div>
                    <div class="x_title">
                        <h2>List of Suppliers</h2>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">

                        <p class="text-muted font-13 m-b-30">
                            <div class="mgbtm20">
                                <a href="#" id="tambahsite" class="btn btn-success btn-cust">Add New Supplier</a>
                            </div>
                        </p>
                        <table id="datatable" class="table table-striped table-bordered bulk_action">
                            <thead>
                                <tr>
                                    <th style="width:10% !important;">@Html.Label("Supplier Code")</th>
                                    <th style="width:12% !important;">@Html.Label("Supplier Name")</th>
                                    <th style="width:9% !important;">@Html.Label("PIC")</th>
                                    <th style="width:15% !important;">@Html.Label("Address")</th>
                                    <th style="width:9% !important;">@Html.Label("City")</th>
                                    <th style="width:9% !important;">@Html.Label("Province")</th>
                                    <th style="width:9% !important;">@Html.Label("Telephone")</th>
                                    <th style="width:2% !important;">@Html.Label("Active")</th>
                                    <th style="width:2%;"></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach(var item in Model )
                                { 
                                <tr>
                                    <td>@Html.DisplayFor(modelItem => item.SupplierCode)</td>
                                    <td>@Html.DisplayFor(modelItem => item.SupplierName)</td>
                                    <td>@Html.DisplayFor(modelItem => item.PIC)</td>
                                    <td>@Html.DisplayFor(modelItem => item.Address)</td>
                                    <td>@Html.DisplayFor(modelItem => item.City)</td>
                                    <td>@Html.DisplayFor(modelItem => item.Province)</td>
                                    <td>@Html.DisplayFor(modelItem => item.Telephone)</td>
                                    <td>@Html.DisplayFor(modelItem => item.bActive)</td>
                                    <td style="width:5% !important;text-align:center;">
                                        <button id="editlocationbutton" name="editlocationbutton" type="button" class="btn btn-success" onclick="UpdateSupplierS('@Html.DisplayFor(modelItem => item.Id)','@Html.DisplayFor(modelItem => item.SupplierCode)','@Html.DisplayFor(modelItem => item.SupplierName)','@Html.DisplayFor(modelItem => item.PIC)','@Html.DisplayFor(modelItem => item.Address)','@Html.DisplayFor(modelItem => item.City)','@Html.DisplayFor(modelItem => item.Province)','@Html.DisplayFor(modelItem => item.PostalCode)', '@Html.DisplayFor(modelItem => item.Telephone)','@Html.DisplayFor(modelItem => item.Fax)','@Html.DisplayFor(modelItem => item.Aktif)')"><span class="glyphicon glyphicon-edit"></span>&nbsp;</button>
                                    </td>
                                </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- MODAL1 START -->
<div class="modal fade" id="addModal" role="dialog" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content col-md-12 col-sm-12 col-xs-12 pdlr1">
            <div class="modal-header">
                <h4 class="modal-title ">Add a Site</h4>
            </div>
            <div class="modal-body col-md-12 col-sm-12 col-xs-12">

                <form class="form-horizontal form-label-left">

                    <!--<div class="form-group mgb25">
                        <label class="control-label col-md-12 col-sm-12 col-xs-12">Enter the data about your new site in the fields below and we will add it to your list.</label>
                    </div>-->

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Supplier Code</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="SupplierCodeId" type="text" name="SupplierCodeId" class="form-control col-md-10" placeholder="Supplier Code" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Supplier Name</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="SupplierNameId" type="text" name="SupplierNameId" class="form-control col-md-10" placeholder="Supplier Name" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">PIC</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="PIC" type="text" name="PIC" class="form-control col-md-10" placeholder="PIC" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Address</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="AddressId" type="text" name="AddressId" class="form-control col-md-10" placeholder="Address" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">City</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="CityId" type="text" name="CityId" class="form-control col-md-10" placeholder="City" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Province</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="ProvinceId" type="text" name="ProvinceId" class="form-control col-md-10" placeholder="Province" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Postal Code</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="PostalCodeId" type="number" name="PostalCodeId" class="form-control col-md-10" placeholder="Postal Code" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Telephone</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="TelephoneId" type="tel" name="TelephoneId" class="form-control col-md-10" placeholder="Telephone" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Fax</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="FaxId" type="tel" name="FaxId" class="form-control col-md-10" placeholder="Fax" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Active</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <div class="checkbox">
                                <label style="padding-left:0 !important">
                                    <input id="ActiveId" name="ActiveId" type="checkbox" class="flat" value=""> Yes
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="ln_solid col-md-12 col-sm-12 col-xs-12"></div>
                    <div class="form-group col-md-12 col-sm-12 col-xs-12 pdlr0">
                        <div class="row col-md-12 col-sm-12 col-xs-12 pdlr0" style="text-align:right;">
                            <button id="SupplierAddId" type="button" class="btn btn-primary" onclick="InputSupplier(); return false;">Add</button>
                            <button id="SupplierCancelId" type="button" class="btn btn-default">Cancel</button>
                        </div>
                    </div>

                </form>

            </div>
        </div>
    </div>
</div>
<!-- MODAL1 END -->

<!-- MODAL2 START -->
<div class="modal fade" id="editModal" role="dialog" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content col-md-12 col-sm-12 col-xs-12 pdlr1">
            <div class="modal-header">
                <h4 class="modal-title ">Edit Site</h4>
            </div>
            <div class="modal-body col-md-12 col-sm-12 col-xs-12">

                <form class="form-horizontal form-label-left">

                    <!--<div class="form-group mgb25">
                        <label class="control-label col-md-12 col-sm-12 col-xs-12">Enter the data about your new site in the fields below and we will add it to your list.</label>
                    </div>-->

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Supplier Code</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="EditSupplierCodeId" type="text" name="EditSupplierCodeId" class="form-control col-md-10" value="" placeholder="Supplier Code" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Supplier Name</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="EditSupplierNameId" type="text" name="EditSupplierNameId" class="form-control col-md-10" value="" placeholder="Supplier Name" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">PIC</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="EditPIC" type="text" name="EditPIC" class="form-control col-md-10" value="" placeholder="PIC" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Address</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="EditAddressId" type="text" name="EditAddressId" class="form-control col-md-10" value="" placeholder="Address" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">City</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="EditCityId" type="text" name="EditCityId" class="form-control col-md-10" value="" placeholder="City" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Province</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="EditProvinceId" type="text" name="EditProvinceId" class="form-control col-md-10" value="" placeholder="Province" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Postal Code</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="EditPostalCodeId" type="number" name="EditPostalCodeId" class="form-control col-md-10" value="" placeholder="Postal Code" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Telephone</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="EditTelephoneId" type="tel" name="EditTelephoneId" class="form-control col-md-10" value="" placeholder="Telephone" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Fax</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <input id="EditFaxId" type="tel" name="EditFaxId" class="form-control col-md-10" value="" placeholder="Fax" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Active</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <div class="checkbox">
                                <label style="padding-left:0 !important">
                                    <input id="EditActiveId" name="EditActiveId" type="checkbox" class="flat" value=""> Yes
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="ln_solid col-md-12 col-sm-12 col-xs-12"></div>
                    <div class="form-group col-md-12 col-sm-12 col-xs-12 pdlr0">
                        <div class="row col-md-12 col-sm-12 col-xs-12 pdlr0" style="text-align:right;">
                            <button id="EditSupplierId" type="button" class="btn btn-primary" onclick="InputEditSupplier(); return false;">Edit</button>
                            <button id="CancelSupplierId" type="button" class="btn btn-default">Cancel</button>
                        </div>
                    </div>

                </form>

            </div>
        </div>
    </div>
</div>
<!-- MODAL2 END -->

@Html.Partial("~/Views/Shared/WarningModal.cshtml")
@RenderPage("~/Views/Shared/_FooterLayout.cshtml")

<script type="text/javascript">
      $(document).ready(function(){
          $("#tambahsite").click(function () {
              $("#addModal").modal();
          });
          //$("#SupplierAddId").click(function () {
          //    $("#addModal").modal('toggle');
          //});
          $("#SupplierCancelId").click(function () {
              $("#addModal").modal('toggle');
          });

          $("#editsupplier").click(function () {
              $("#editModal").modal();
          });
          //$("#EditSupplierId").click(function () {
          //    $("#editModal").modal('toggle');
          //});
          $("#CancelSupplierId").click(function () {
              $("#editModal").modal('toggle');
          });
      });

    $("#check-all").click(function () {
        $(".checks").prop('checked', $(this).prop('checked'));
    });

</script>