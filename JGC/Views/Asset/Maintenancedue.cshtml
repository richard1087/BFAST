@{
    ViewBag.Title = "Maintenances";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script>
function UpdateMaintenance(MaintenanceNo) {
        $.ajax({
            url: '@Url.Action("UpdateMaintenance", "Asset")',
            type: 'post',
            cache: false,
            async: true,
            data: { MaintenanceNo: MaintenanceNo },
            success: function (response) {
            window.location.href = "@Url.Action("Editmaintenance", "Asset")";
            },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    $(".modal-body #peringatan1").text("Please Wait...");
                    $('#btncaution').click(function (e) {
                    $('#Alert1').modal('hide');
                })
                $("#Alert1").modal();
            }
            });
}
</script>
<div class="right_col" role="main">
    <div class="">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="menusect">
                        <h5>
                            Assets •
                            <a href="/asset/maintenancedue" class="activemenu">Maintenance</a>
                        </h5>
                    </div>
                    <div class="x_title">
                        <h2>List of Maintenances</h2>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <p class="text-muted font-13 m-b-30">
                            <div class="mgbtm20">
                                <a href="/asset/createmaintenance" class="btn btn-success btn-cust">Create New</a>
                                <div class="btn-group top-2">
                                    @*<ul role="menu" class="dropdown-menu">
                                            <li><a href="#">All Maintenances</a></li>
                                            <li><a href="#">Due maintenances</a></li>
                                        </ul>*@
                                </div>
                                <!--<div class="floatright mgl25">
                                    <button type="submit" class="btn btn-success btn-cust floatright top-2">Go</button>
                                    <div class="btn-group floatright mgr10">
                                        <select id="heard" class="form-control hgt33" required>
                                            <option value="">Choose..</option>
                                            <option value="edit">Edit</option>
                                            <option value="delete">Delete</option>
                                            <option value="generatelabel">Generate Labels</option>
                                        </select>
                                    </div>
                                </div>-->
                            </div>
                        </p>
                        <table id="datatable" class="table table-striped table-bordered">
                            <thead>
                                <tr>
                                    <th width="13%">@Html.Label("Maintenance No")</th>
                                    <th width="8%">@Html.Label("Status")</th>
                                    <th width="10%">@Html.Label("Asset Code")</th>
                                    <th width="15%">@Html.Label("Asset Name")</th>
                                    <th width="8%">@Html.Label("Type")</th>
                                    <th width="10%">@Html.Label("Schedule Date")</th>
                                    <th width="10%" style="text-align:right">@Html.Label("Cost")</th>
                                    <th width="4%"></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (CORE.JGC.Models.TrMaintenanceAsset item in Model)
                                {
                                    <tr>
                                        <td>@Html.DisplayFor(modelItem => item.MaintenanceNo)</td>
                                        <td>@Html.DisplayFor(modelItem => item.Status)</td>
                                        <td>@Html.DisplayFor(modelItem => item.AssetCode)</td>
                                        <td>@Html.DisplayFor(modelItem => item.AssetName)</td>
                                        <td>@Html.DisplayFor(modelItem => item.Type)</td>
                                        <td>@Convert.ToDateTime(item.ScheduleDate).ToString("dd/MM/yyyy")</td>
                                        <td style="text-align:right;">@Html.DisplayFor(modelItem => item.Cost)</td>
                                        <td style="width:5% !important;text-align:center;">

                                            <button id="edit" name="edit" type="button" data-toggle="tooltip" title="Edit" class="btn btn-success" onclick="return UpdateAsset('@Html.DisplayFor(modelItem => item.MaintenanceNo)');"><span class="glyphicon glyphicon-edit"></span></button>

                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- MODAL1 START -->
<div class="modal fade" id="assetModal" role="dialog">
    <div class="modal-dialog" style="width:70%;">
        <div class="modal-content col-md-12 col-sm-12 col-xs-12 pdlr1">
            <div class="modal-header">
                <h4 class="modal-title ">ASST000001</h4>
            </div>
            <div class="modal-body col-md-12 col-sm-12 col-xs-12">
                <div class="col-md-4 col-sm-4 col-xs-12">
                    <img src="~/Content/res/images/laptop.jpg" alt="..." class="img-responsive" style="width:100%;">
                </div>
                <div class="col-md-4 col-sm-4 col-xs-12">
                    <form class="form-horizontal form-label-left">
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <tr>
                                    <td><a href="">Purchase Date</a></td>
                                    <td><a href="#"> <b>20/04/2018</b> </a></td>
                                </tr>
                                <tr>
                                    <td><a href="">Purchase From</a></td>
                                    <td><a href="#"> <b>Lazadong</b> </a></td>
                                </tr>
                                <tr>
                                    <td><a href="">Cost</a></td>
                                    <td><a href="#"> <b>Rp.7,500,000</b> </a></td>
                                </tr>
                                <tr>
                                    <td><a href="">Brand</a></td>
                                    <td><a href="#"> <b>Sumsang</b> </a></td>
                                </tr>
                                <tr>
                                    <td><a href="">Model</a></td>
                                    <td><a href="#"> <b>Sumsang990</b> </a></td>
                                </tr>
                            </tbody>
                        </table>
                    </form>
                </div>
                <div class="col-md-4 col-sm-4 col-xs-12">
                    <form class="form-horizontal form-label-left">
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <tr>
                                    <td><a href="">Serial No</a></td>
                                    <td><a href="#"> <b>2193819319</b> </a></td>
                                </tr>
                                <tr>
                                    <td><a href="">Site</a></td>
                                    <td><a href="#"> <b>Jekardah</b> </a></td>
                                </tr>
                                <tr>
                                    <td><a href="">Location</a></td>
                                    <td><a href="#"> <b>Jekardah</b> </a></td>
                                </tr>
                                <tr>
                                    <td><a href="">Category</a></td>
                                    <td><a href="#"> <b>Leptop</b> </a></td>
                                </tr>
                                <tr>
                                    <td><a href="">Department</a></td>
                                    <td><a href="#"> <b>IT</b> </a></td>
                                </tr>
                                <tr>
                                    <td><a href="">Assigned to</a></td>
                                    <td><a href="#"> <b></b> </a></td>
                                </tr>
                                <tr>
                                    <td><a href="">Status</a></td>
                                    <td><a href="#"> <b>Leased</b> </a></td>
                                </tr>
                            </tbody>
                        </table>
                    </form>
                </div>
                <div class="ln_solid col-md-12 col-sm-12 col-xs-12"></div>
                <div class="form-group col-md-12 col-sm-12 col-xs-12 pdlr0">
                    <div class="row col-md-12 col-sm-12 col-xs-12 pdlr0" style="text-align:right;">
                        <button id="AssetCloseId" type="button" class="btn btn-primary">Close</button>
                        <a href="/asset/details" class="btn btn-success">More Details</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- MODAL1 END -->
<!-- MODAL2 START -->
<div class="modal fade" id="assetMaintenance" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content col-md-12 col-sm-12 col-xs-12 pdlr1">
            <div class="modal-header">
                <h4 class="modal-title ">Asset Maintenance</h4>
            </div>
            <div class="modal-body col-md-12 col-sm-12 col-xs-12">
                <form class="form-horizontal form-label-left">
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Title</label>
                        <div class="col-md-7 col-sm-7 col-xs-12">
                            <input type="text" name="Title" class="form-control col-md-10" placeholder="Title" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Details</label>
                        <div class="col-md-7 col-sm-7 col-xs-12">
                            <textarea class="form-control" rows="3" placeholder="Details"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Due Date</label>
                        <div class="col-md-7 col-sm-7 xdisplay_inputx form-group has-feedback" style="margin-bottom: 0 !important;">
                            <input type="text" class="form-control has-feedback-left" id="single_cal2" placeholder="Due Date" aria-describedby="dueDate">
                            <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
                            <span id="dueDate" class="sr-only">(success)</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Maintenance By</label>
                        <div class="col-md-7 col-sm-7 col-xs-12">
                            <input type="text" name="Maintenance By" class="form-control col-md-10" placeholder="Maintenance By" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Maintenance Status</label>
                        <div class="col-md-7 col-sm-7 col-xs-12">
                            <input list="Status" name="Site" class="form-control" placeholder="Select Status">
                            <datalist id="Status">
                                <option value="Scheduled">
                                <option value="Progress">
                                <option value="On Hold">
                                <option value="Cancelled">
                                <option value="Completed">
                            </datalist>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Date Completed</label>
                        <div class="col-md-7 col-sm-7 xdisplay_inputx form-group has-feedback" style="margin-bottom: 0 !important;">
                            <input type="text" class="form-control has-feedback-left" id="single_cal2" placeholder="Date Completed" aria-describedby="dateCompleted">
                            <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
                            <span id="dateCompleted" class="sr-only">(success)</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Cost of Repairs</label>
                        <div class="col-md-7 col-sm-7 col-xs-12">
                            <input type="number" name="Cost of Repairs" class="form-control col-md-10" placeholder="Cost of Repairs" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Repeating</label>
                        <div class="col-md-7 col-sm-7 col-xs-12">
                            <input type="radio" name="checkrepeating" class="flat" id="repeatyes" value="checkrepeatingyes" checked /> Yes &nbsp;&nbsp;&nbsp;
                            <input type="radio" name="checkrepeating" class="flat" id="repeatno" value="checkrepeatingno" /> No
                        </div>
                    </div>
                    <div class="ln_solid col-md-12 col-sm-12 col-xs-12"></div>
                    <div class="form-group col-md-12 col-sm-12 col-xs-12">
                        <div class="col-md-12 col-sm-12 col-xs-6" style="text-align:right;">
                            <button id="MaintenanceLinkId" type="button" class="btn btn-success">Link</button>
                            <button id="MaintenanceCancelId" type="button" class="btn btn-default">Cancel</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- MODAL2 END -->
@RenderPage("~/Views/Shared/_FooterLayout.cshtml")
<script type="text/javascript">
      $(document).ready(function(){
          $("#assetmodel").click(function () {
              $("#assetModal").modal();
          });
          $("#AssetCloseId").click(function () {
              $("#assetModal").modal('toggle');
          });

          $("#lihatmaintenance").click(function () {
              $("#assetMaintenance").modal();
          });
          $("#MaintenanceLinkId").click(function () {
              $("#assetMaintenance").modal('toggle');
          });
          $("#MaintenanceCancelId").click(function () {
              $("#assetMaintenance").modal('toggle');
          });


          
      });
      function UpdateAsset(MaintenanceNo) {
          $.ajax({

              url: '@Url.Action("UpdateMaintenanceAsset", "Asset")',
              type: 'Post',
              cache: false,
              async: true,
              data: {
                  MaintenanceNo: MaintenanceNo
              },
              success: function (response) {
                  window.location.href = '@Url.Action("UpdateMaintenance", "Asset")'
              },
              error: function (XMLHttpRequest, textStatus, errorThrown) {
                  $(".modal-body #peringatan1").text("Please Wait...");
                  $('#btncaution').click(function (e) {
                      $('#Alert1').modal('hide');
                  })
                  $("#Alert1").modal();
              }
          });
      }
</script>